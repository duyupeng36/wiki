# 设置开发环境

本节主要介绍了在 Windows 操作系统中如何安装 C++ 编译器，以及如何配置 visual studio code 作为 C++ 集成开发环境(Integrated Development Environment, IDE)

## Windows

在 Windows 中，我们可以选择 $3$ 种 C++ 编译器，它们分别是

+ MSVC：由 Microsoft 的 [visual studio](https://visualstudio.microsoft.com/zh-hans/) 产品提供
+ GCC & Clang: GCC 和 Clang 在 Windows 中有多个提供方，我们选择 [msys2](https://www.msys2.org/) 提供的编译器

下面我们介绍如何安装 GCC & Clang。因为它们是跨平台的，在 Linux 和 MacOS 上同样可以使用。

### 安装 GCC & Clang 编译器

1. 访问 [msys2](https://www.msys2.org/) 官方网站

    ![1758635338691-b9067d26f0a9462fa89b122152dfdb12.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758635338691-b9067d26f0a9462fa89b122152dfdb12.png)

2. 下载 [msys2-x86_64-20250830.exe](https://github.com/msys2/msys2-installer/releases/download/2025-08-30/msys2-x86_64-20250830.exe) 或者 [msys2-arm64-20250830.exe](https://github.com/msys2/msys2-installer/releases/download/2025-08-30/msys2-arm64-20250830.exe)

3. 双击运行 msys2 安装程序，选择 msys2 的安装位置。请注意：

    ![1758635603026-536b5199d3474b829b2f00f4fc0b4c02.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758635603026-536b5199d3474b829b2f00f4fc0b4c02.png)

4. 点击 `Next` 后，等待完成后点击 `Finish`

    ![1758637415771-f57548270c724acd9dce797312358576.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758637415771-f57548270c724acd9dce797312358576.png)

5. 现在 msys2 已经为您准备就绪

    ![1758637462189-cd64938daeb9414ca179a4d475dfecb1.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758637462189-cd64938daeb9414ca179a4d475dfecb1.png)

6. 安装 GCC & Clang

    ![1758637547131-e3005b329d5441a985d04fa8222d4007.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758637547131-e3005b329d5441a985d04fa8222d4007.png)

    安装 GCC & Clang 的命令如下

    ```shell
    # 安装基本组件
    pacman -S --needed base-devel
    # 安装 GCC 
    pacman -S mingw-w64-ucrt-x86_64-toolchain 
    # 安装 Clang
    pacman -S mingw-w64-clang-x86_64-toolchain
    ```

7. 配置 `PATH` 环境变量

    ![1758640454966-2ce5ffd78ab64a86a26dd4ac0f7f538a.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758640454966-2ce5ffd78ab64a86a26dd4ac0f7f538a.png)

### 安装 visual studio code

访问 [visual studio code](https://code.visualstudio.com/Download) 网站下载页面

![1758639042318-876e7ac5cf524faa9e05226b6557bd20.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758639042318-876e7ac5cf524faa9e05226b6557bd20.png)

下载 Windows 平台的 System Installer

![1758639243451-ea41c0c2435441538ec36f0a03cc4b00.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758639243451-ea41c0c2435441538ec36f0a03cc4b00.png)

启动 Visual Studio Code 安装程序，然后一直点击 `下一步`，直到出现安装完成

![1758639454353-ae062c1b70254cc78640716e224cbad6.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758639454353-ae062c1b70254cc78640716e224cbad6.png)

![1758639511613-230c079361ff4cd7ab0d4644f0107638.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758639511613-230c079361ff4cd7ab0d4644f0107638.png)

点击 `完成` 即可

![1758639605464-1b9a22ff928c4cc5bc64350b5b26b5fc.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758639605464-1b9a22ff928c4cc5bc64350b5b26b5fc.png)

### 配置 Visual Studio Code

1. 安装 C/C++ 扩展

    ![1758640268817-e9b8f256b2784507931b4196136d1bba.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758640268817-e9b8f256b2784507931b4196136d1bba.png)

2. 配置 C/C++ 编译器：选择 `C/C++:编辑配置(UI)`

    ![1758641015561-de34f14437d4406691b9ee1a30b0e8cc.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758641015561-de34f14437d4406691b9ee1a30b0e8cc.png)

    配置完成后，就会在当前目录生成 `.viscode/c_cpp_properties.json` 文件

3. 新建一个 `.cpp` 文件

4. 配置 C/C++ 编译任务: `菜单栏 => 终端 => 配置任务`

    ![1758641361101-2025deec76dc46b8ae627b8f930e0e65.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758641361101-2025deec76dc46b8ae627b8f930e0e65.png)

5. 选择 `C/C++: clang++.exe 生成活动文件`

    ![1758641995255-8a2e7490ffd340569e7b7cf5609fc8a2.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758641995255-8a2e7490ffd340569e7b7cf5609fc8a2.png)

6. 对 `.vscode/tasks.json` 中的内容进行修改

    ```json
    {
        "version": "2.0.0",
        "tasks": [
            {
                "type": "cppbuild",
                "label": "C++: Buid With Clang++",
                "command": "C:/msys64/clang64/bin/clang++.exe",
                "args": [
                    "-fcolor-diagnostics",
                    "-fansi-escape-codes",
                    "-std=c++23",
                    "-g",
                    "${file}",
                    "-o",
                    "${fileDirname}\\${fileBasenameNoExtension}.exe"
                ],
                "options": {
                    "cwd": "C:/msys64/clang64/bin"
                },
                "problemMatcher": [
                    "$gcc"
                ],
                "group": "build",
                "detail": "编译器: C:/msys64/clang64/bin/clang++.exe"
            }
        ]
    }
    ```

7. 配置调试任务: 按照下图方式配置调试任务，这会自动创建 `launch.json` 文件

    ![1758642305116-f5de36465d5446fd8251cfa10cca4a17.png](http://cdn.jsdelivr.net/gh/duyupeng36/images@master/obsidian/1758642305116-f5de36465d5446fd8251cfa10cca4a17.png)

8. 对 `lunch.json` 文件进行修改

    ```json
    {
        "configurations": [
            {
                "name": "C++: Debug With LLDB",  // 修改标签
                "type": "cppdbg",
                "request": "launch",
                "program": "${fileDirname}\\${fileBasenameNoExtension}.exe",
                "args": [],
                "stopAtEntry": false,
                "cwd": "C:/msys64/clang64/bin",
                "environment": [],
                "externalConsole": false,
                "MIMode": "lldb",
                "miDebuggerPath": "C:\\msys64\\clang64\\bin\\lldb.exe",
                "setupCommands": [
                    {
                        "description": "为 gdb 启用整齐打印",
                        "text": "-enable-pretty-printing",
                        "ignoreFailures": true
                    },
                    {
                        "description": "将反汇编风格设置为 Intel",
                        "text": "-gdb-set disassembly-flavor intel",
                        "ignoreFailures": true
                    }
                ],
                "preLaunchTask": "C++: Buid With Clang++"
            }
        ],
        "version": "2.0.0"
    }
    ```

到此，Visual Studio Code 作为 C++ 集成开发环境就已经配置完成了

## Linux

在 Linux 上配置与 Windows 类似。只是安装的方式不同

## MacOS

没有该类型的设备，忽略